<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
      <title>{{ member.membership_number }} New Releases {{ search_end_date }} </title>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>

  </head>
  <body style="background-color:whitesmoke; position:relative; width:210mm; height:297mm; margin: 0 auto; ">
    <!--#region header -->
      <span style="display:flex; justify-content:space-between;">
        <span style="font-size:4rem; text-transform:uppercase;">
          <strong style="display:flex; align-items:center">
            <span>
              <i class="fas fa-university"></i>
            </span>
            <span style="font-size:3rem; margin-left:3mm; margin-top:2mm">
              {{ library }}
            </span>
          </strong>
        </span>
        <span style="margin-top:3.5mm">
          <span>
            <strong>New Releases</strong> {{ search_end_date }}
          </span>
          <br>
          <span style="float:right; padding-top:0mm; font-size:1.4rem;">
            {{ member.address.first_name }} {{ member.address.last_name }}
            <span style="font-size:0.7rem">
              {{ member.membership_number }}
            </span>
          </span>
        </span>   
      </span>
    <!--#endregion -->

    <!--#region new releases this week -->
      <span style="font-size: 1.2rem; display:flex; justify-content:center;  margin-top:5mm">NEW RELEASES</span>
      <table class="table" style="font-size:0.7rem; margin-top:10mm">

        <!--#region table headers -->
        <thead>
          <tr>
            <th></th>
            <th style="width:30mm"></th>
            <th style="width:10mm"></th>
            <th>Artist</th>
            <th>Title</th>
            <th>Label</th>
            <th>Track Crate ID's</th>
          </tr>
        </thead>
        <!--#endregion -->

        <!--#region table body -->
          <tbody>
            {% for release in releases %}
              {% if release.on_previous_weekly_release_sheet == False %}
                <tr style="color:green">
              {% else %}
                <tr>
              {% endif %}
                {% if release.artwork_small %}
                  <td>
                    <img src="{{ release.artwork_small.url }}" width="25" height="25">
                  </td>
                {% else %}
                  <td></td>
                {% endif %}
                <!--#region catalog and link -->
                <td>
                  {% if release.release_to_check_out %}
                    {% if release.on_previous_weekly_release_sheet == True %}
                      {{ release.catalog_number }}
                    {% else %}
                      <span style="color:green">{{ release.catalog_number }}</span>
                    {% endif %}
                  {% else %}
                    {% if release.on_previous_weekly_release_sheet == True %}
                    <span style="opacity:0.2">{{ release.catalog_number }}</span>
                    {% else %}
                    <span style="color:green; opacity:0.2">{{ release.catalog_number }}</span>
                    {% endif %}
                  {% endif %}
                </td>
                <!--#endregion -->
                {% if release.release_to_check_out %}
                  <td>
                {% else %}
                  <td style="opacity:0.2">
                {% endif %}
                {% if release.plate_count >= 2 %}
                  {{ release.plate_count }}x{{ release.plate_size }}
                {% else %}
                  {{ release.plate_size }}
                {% endif %}
                </td>
                
                {% if release.release_to_check_out %}
                  <td>
                {% else %}
                  <td style="opacity:0.2">
                {% endif %}
                {{ release.artist }}
                </td>
                {% if release.release_to_check_out %}
                  <td>
                {% else %}
                  <td style="opacity:0.2">
                {% endif %}
                  {{ release.release_title }}
                </td>
                {% if release.release_to_check_out %}
                  <td>
                {% else %}
                  <td style="opacity:0.2">
                {% endif %}
                  {{ release.label }}
                </td>
                <td>
                  {% for i in release.crate_id %}
                    {% if forloop.last %}
                      {% if i in prefered_crate_ids %}
                        {% if release.on_previous_weekly_release_sheet == False %}
                          <span style="color:green">{{ i }}</span>
                        {% else %}
                          <span style="color:black">{{ i }}</span>
                        {% endif %}
                      {% elif i in irrelevant_crate_ids %}
                        
                      {% else %}
                        <span style="opacity: 0.2">{{ i }}</span>
                      {% endif %}
                    {% else %}
                      {% if i in prefered_crate_ids %}
                        {% if release.on_previous_weekly_release_sheet == False %}
                          <span style="color:green">{{ i }},</span>
                        {% else %}
                          <span style="color:black">{{ i }},</span>
                        {% endif %}
                      {% elif i in irrelevant_crate_ids %}
                        
                      {% else %}
                        <span style="opacity: 0.2">{{ i }},</span>
                      {% endif %}
                    {% endif %}
                  {% endfor %}
                </td>
              </tr>
            {% endfor %} 
          </tbody>
        <!--#endregion -->

      </table><br>
    <!--#endregion -->

    <!--#region forthcoming releases -->
      {% if pre_orders|length != 0 %}
        <span style="font-size: 1.2rem; display:flex; justify-content:center;">FORTHCOMING RELEASES</span>
        <table class="table" style="font-size:0.7rem; margin-top:10mm">
          <!--#region table headers -->
            <thead>
              <tr>
                <th></th>
                <th style="width:30mm"></th>
                <th style="width:10mm"></th>
                <th>Artist</th>
                <th>Title</th>
                <th>Label</th>
                <th>Track Crate ID's</th>
              </tr>
            </thead>
          <!--#endregion -->

          <!--#region table body -->
            <tbody>
              {% for release in pre_orders %}
                {% if release.on_previous_weekly_release_sheet == False %}
                  <tr style="color:green">
                {% else %}
                  <tr>
                {% endif %}
                  {% if release.artwork_small %}
                  <td>
                    <img src="{{ release.artwork_small.url }}" width="25" height="25">
                  </td>
                  {% else %}
                  <td></td>
                  {% endif %}
                  <!--#region catalog and link -->
                  <td>
                    {% if release.release_to_check_out %}
                      {% if release.on_previous_weekly_release_sheet == True %}
                        {{ release.catalog_number }}
                      {% else %}
                        <span style="color:green">{{ release.catalog_number }}</span>
                      {% endif %}
                    {% else %}
                      {% if release.on_previous_weekly_release_sheet == True %}
                      <span style="opacity:0.2">{{ release.catalog_number }}</span>
                      {% else %}
                      <span style="color:green; opacity:0.2">{{ release.catalog_number }}</span>
                      {% endif %}
                    {% endif %}
                  </td>
                  <!--#endregion -->
                  
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                  {% if release.plate_count >= 2 %}
                    {{ release.plate_count }}x{{ release.plate_size }}
                  {% else %}
                    {{ release.plate_size }}
                  {% endif %}
                  </td>
                  
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                  {{ release.artist }}
                  </td>
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                    {{ release.release_title }}
                  </td>
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                    {{ release.label }}
                  </td>
                  <td>
                    {% for i in release.crate_id %}
                      {% if forloop.last %}
                        {% if i in prefered_crate_ids %}
                          {% if release.on_previous_weekly_release_sheet == False %}
                            <span style="color:green">{{ i }}</span>
                          {% else %}
                            <span style="color:black">{{ i }}</span>
                          {% endif %}
                        {% elif i in irrelevant_crate_ids %}
                          
                        {% else %}
                          <span style="opacity: 0.2">{{ i }}</span>
                        {% endif %}
                      {% else %}
                        {% if i in prefered_crate_ids %}
                          {% if release.on_previous_weekly_release_sheet == False %}
                            <span style="color:green">{{ i }},</span>
                          {% else %}
                            <span style="color:black">{{ i }},</span>
                          {% endif %}
                        {% elif i in irrelevant_crate_ids %}
                          
                        {% else %}
                          <span style="opacity: 0.2">{{ i }},</span>
                        {% endif %}
                      {% endif %}
                    {% endfor %}
                  </td>
                </tr>
              {% endfor %} 
            </tbody>
          <!--#endregion -->
        </table><br>
      {% endif %}
    <!--#endregion -->
    
    <!--#region not previously available -->
      {% if previously_not_availible_releases|length != 0 %}
        <div style="padding:3mm 0mm 5mm 0mm;">
          <span style="font-size: 1.2rem; display:flex; justify-content:center">RECENTLY ADDED BACK CATALOGUE or DISTRIBUTORS RESTOCKS / REPRESS</span>
          <table class="table" style="font-size:0.7rem; margin-top:10mm">
            <!--#region table headers -->
            <thead>
              <tr>
                <th></th>
                <th style="width:30mm"></th>
                <th style="width:10mm"></th>
                <th>Artist</th>
                <th>Title</th>
                <th>Label</th>
                <th>Track Crate ID's</th>
              </tr>
            </thead>
          <!--#endregion -->

          <!--#region table body -->
            <tbody>
              {% for release in previously_not_availible_releases %}
                {% if release.on_previous_weekly_release_sheet == False %}
                  <tr style="color:green">
                {% else %}
                  <tr>
                {% endif %}
                  {% if release.artwork_small %}
                    <td>
                      <img src="{{ release.artwork_small.url }}" width="25" height="25">
                    </td>
                  {% else %}
                    <td></td>
                  {% endif %}
                  <!--#region catalog and link -->
                    
                  <td>
                    {% if release.release_to_check_out %}
                      {% if release.on_previous_weekly_release_sheet == True %}
                        {{ release.catalog_number }}
                      {% else %}
                        <span style="color:green">{{ release.catalog_number }}</span>
                      {% endif %}
                    {% else %}
                      {% if release.on_previous_weekly_release_sheet == True %}
                      <span style="opacity:0.2">{{ release.catalog_number }}</span>
                      {% else %}
                      <span style="color:green; opacity:0.2">{{ release.catalog_number }}</span>
                      {% endif %}
                    {% endif %}
                  </td>

                  <!--#endregion -->
                  
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                  {% if release.plate_count >= 2 %}
                    {{ release.plate_count }}x{{ release.plate_size }}
                  {% else %}
                    {{ release.plate_size }}
                  {% endif %}
                  </td>
                  
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                  {{ release.artist }}
                  </td>
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                    {{ release.release_title }}
                  </td>
                  {% if release.release_to_check_out %}
                    <td>
                  {% else %}
                    <td style="opacity:0.2">
                  {% endif %}
                    {{ release.label }}
                  </td>
                  <td>
                    {% for i in release.crate_id %}
                      {% if forloop.last %}
                        {% if i in prefered_crate_ids %}
                          {% if release.on_previous_weekly_release_sheet == False %}
                            <span style="color:green">{{ i }}</span>
                          {% else %}
                            <span style="color:black">{{ i }}</span>
                          {% endif %}
                        {% elif i in irrelevant_crate_ids %}
                          
                        {% else %}
                          <span style="opacity: 0.2">{{ i }}</span>
                        {% endif %}
                      {% else %}
                        {% if i in prefered_crate_ids %}
                          {% if release.on_previous_weekly_release_sheet == False %}
                            <span style="color:green">{{ i }},</span>
                          {% else %}
                            <span style="color:black">{{ i }},</span>
                          {% endif %}
                        {% elif i in irrelevant_crate_ids %}
                          
                        {% else %}
                          <span style="opacity: 0.2">{{ i }},</span>
                        {% endif %}
                      {% endif %}
                    {% endfor %}
                  </td>
                </tr>
              {% endfor %} 
            </tbody>
          </table>
        </div>
      {% endif %}
    <!--#endregion -->
      
  
  </body>
</html>