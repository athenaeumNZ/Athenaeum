<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="UTF-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
      <title>{{ member }} Stockpile</title>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"></script>
      <style>
        @media print
          {    
              .no-print, .no-print *
              {
                  display: none !important;
              }
          }
      </style>
  </head>
  <body style="background-color:whitesmoke">
    <div style="left:0; position:relative; width:210mm; height:297mm; margin: 0mm auto; background-color:white; padding:0mm 5mm">
      
      <!--#region header -->
      <span style="display:flex; justify-content:space-between; text-transform:uppercase">
        <span>
          <span style="font-size:4rem"><strong>{{ member.library.name }}</strong></span><br>
          <span style="font-size:1.4rem">{{ member.user.first_name }} {{ member.user.last_name }}</span><br>
          <span style="font-size:1.2rem">Stockpile: </span>
          <span>{% now "d M Y" %}</span>

        </span>
      </span>
      <!--#endregion -->

      <!--#region in unavailable releases -->
        {% if unavailable_releases|length >= 1 %}
          <span style="margin-top:5mm; display:flex; justify-content:center;">
            <table class="table caption-top" style="font-size:0.7rem">
              <caption style="font-size:0.8rem">
                Unavailable Releases
              </caption>
              
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th>Catalog</th>
                  <th>Artist</th>
                  <th>Title</th>
                  <th>Label</th>
                  <th class="text-center">Q</th>
                </tr>
              </thead>
              <tbody>
                {% for item in unavailable_releases %}
                  <tr style="text-decoration:line-through; color:red">
                    <!--#region artwork -->
                      <td style="height:25px; width: 25px; text-align:center;">
                        {% if item.vinyl_release.artwork_small %}
                            <img src="{{ item.vinyl_release.artwork_small.url }}" width="25" height="25">
                        {% else %}
                        <div style="text-align:center; font-size: 0.5rem;">No image</div>
                        {% endif %}
                      </td>
                    <!--#endregion -->
                    {% if item.vinyl_release.plate_count == 1 %}
                      <td class="text-center">{{ item.vinyl_release.plate_size }}</td>
                    {% else %}
                      <td class="text-center">{{ item.vinyl_release.plate_count }}x{{ item.vinyl_release.plate_size }}</td>
                    {% endif %}
                    <td>{{ item.vinyl_release.catalog_number }}</td>
                    <td>{{ item.vinyl_release.artist }}</td>
                    <td>{{ item.vinyl_release.release_title }}</td>
                    <td>{{ item.vinyl_release.label }}</td>

                    <td class="text-center">
                      {{ item.quantity }}
                    </td>
                  </tr>
                  <tr>
                    <td colspan="7">{{ item.note }}</td>
                  </tr>
                {% endfor %}
              </tbody> 
            </table>
          </span>
        {% endif %}
      <!--#endregion -->
      
      {% if stockpile|length >= 1 %}
        <!--#region in stockpile -->
        
          <span style="margin-top:5mm; display:flex; justify-content:center">
            <table class="table caption-top" style="font-size:0.7rem">
              <caption style="font-size:0.8rem">
                Stockpile
              </caption>
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th>Catalog</th>
                  <th>Artist</th>
                  <th>Title</th>
                  <th>Label</th>
                  <th class="text-center">Q</th>
                </tr>
              </thead>
              <tbody>
                {% for item in stockpile %}
                  {% if item.paid != True %}
                    <tr style="color:red">
                  {% else %}
                    <tr>
                  {% endif %}
                    <!--#region artwork -->
                      <td style="height:25px; width: 25px; text-align:center;">
                        {% if item.vinyl_release.artwork_small %}
                            <img src="{{ item.vinyl_release.artwork_small.url }}" width="25" height="25">
                        {% else %}
                        <div style="text-align:center; font-size: 0.5rem;">No image</div>
                        {% endif %}
                      </td>
                    <!--#endregion -->
                    {% if item.vinyl_release.plate_count == 1 %}
                      <td class="text-center">{{ item.vinyl_release.plate_size }}</td>
                    {% else %}
                      <td class="text-center">{{ item.vinyl_release.plate_count }}x{{ item.vinyl_release.plate_size }}</td>
                    {% endif %}
                    <td>{{ item.vinyl_release.catalog_number }}</td>
                    <td>{{ item.vinyl_release.artist }}</td>
                    <td>{{ item.vinyl_release.release_title }}</td>
                    <td>{{ item.vinyl_release.label }}</td>

                    <td class="text-center">
                      {{ item.quantity }}
                    </td>
                  </tr>
                {% endfor %}
              </tbody> 
            </table>
          </span>
        
        <!--#endregion -->

        <!--#region postage option -->
          <div style=" border:1px solid black; padding:5mm; margin:5mm">
            <span style="font-size:0.7rem;">
              <span style="font-weight:600; font-size:0.8rem">Contact {{ library }} if you want you stockpiled items to be sent to you.<br><br></span>
              <!--#region economy courier -->
                  {% if economy_price != 0 %}
                  <form action="{% url 'courier_package_create_submission' library.id member.id %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <input type="hidden" value="{{ economy_price }}" name="cost">
                    <input type="hidden" value="Economy" name="service">
                    <input type="submit" value="Economy ${{ economy_price|floatformat:2 }}" class="btn btn-sm btn-default" style="font-size:0.8rem; padding-left:0">  
                  </form>
                {% endif %}
                Delivered within 3 working days (does not include weekends).
                A tracked service for parcels valued up to $250.
                Delivered to letterbox.
                Opt-in for parcel status updates.
                <br><br>
              <!--#endregion -->
              
              <!--#region courier -->
                <form action="{% url 'courier_package_create_submission' library.id member.id %}" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  <input type="hidden" value="{{ courier_price }}" name="cost">
                  <input type="hidden" value="Standard Courier" name="service">
                  <input type="submit" value="Standard Courier ${{ courier_price|floatformat:2 }}" class="btn btn-sm btn-default" style="font-size:0.8rem; padding-left:0">                  
                </form>         
                Our fastest delivery service.
                A tracked services for parcels valued up to $2000.
                Delivered to door, or preferred delivery spot.
                Opt-in for parcel status updates.
                <br><br>
              <!--#endregion --> 

              <!--#region signed courier -->
                <form action="{% url 'courier_package_create_submission' library.id member.id %}" method="post" enctype="multipart/form-data">
                  {% csrf_token %}
                  <input type="hidden" value="{{ signed_courier_price }}" name="cost">
                  <input type="hidden" value="Signed Courier" name="service">
                  <input type="submit" value="Signed Courier ${{ signed_courier_price|floatformat:2 }}" class="btn btn-sm btn-default" style="font-size:0.8rem; padding-left:0">                  
                </form>
                Our fastest delivery service.
                Signed for on delivery for extra peace of mind.
                A tracked services for parcels valued up to $2000.
                Delivered to door, or preferred delivery spot.
                Opt-in for parcel status updates.
                <br><br>
              <!--#endregion -->

              <!--#region pick up -->
                <form action="{% url 'courier_package_create_submission' library.id member.id %}" method="post" enctype="multipart/form-data" class="no-print">
                  {% csrf_token %}
                  <input type="hidden" value="0" name="cost">
                  <input type="hidden" value="Free Delivery" name="service">
                  <input type="submit" value="Free Delivery" class="btn btn-sm btn-default" style="font-size:0.8rem; padding-left:0">  
                </form>
              <!--#endregion -->
            </span>
          </div>
        <!--#endregion -->
      {% endif %}

      <!--#region on order -->
        {% if on_order_plates|length >= 1 %}
          {% if stockpile|length >= 1 %}
          <span style="margin-top:10mm; display:flex; justify-content:center; page-break-before: always">
            
          {% else %}
          <span style="margin-top:10mm; display:flex; justify-content:center">
          {% endif %}
            <table class="table caption-top" style="font-size:0.7rem">
              <caption style="font-size:0.8rem">
                On Order.<br>
                Note: I may not have conformation from my all my distributors on the availability of some items.
              </caption>
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th>Catalog</th>
                  <th>Artist</th>
                  <th>Title</th>
                  <th>Label</th>
                  <th class="text-center">Date</th>
                  <th class="text-center">Dist.</th>
                  <th class="text-center">Q</th>
                </tr>
              </thead>
              <tbody>
                {% for item in on_order_plates %}
                  <tr>
                    <!--#region artwork -->
                      <td style="height:25px; width: 25px; text-align:center;">
                        {% if item.vinyl_release.artwork_small %}
                            <img src="{{ item.vinyl_release.artwork_small.url }}" width="25" height="25">
                        {% else %}
                        <div style="text-align:center; font-size: 0.5rem;">No image</div>
                        {% endif %}
                      </td>
                    <!--#endregion -->
                    {% if item.vinyl_release.plate_count == 1 %}
                      <td class="text-center">{{ item.vinyl_release.plate_size }}</td>
                    {% else %}
                      <td class="text-center">{{ item.vinyl_release.plate_count }}x{{ item.vinyl_release.plate_size }}</td>
                    {% endif %}
                    <td>{{ item.vinyl_release.catalog_number }}</td>
                    <td>{{ item.vinyl_release.artist }}</td>
                    <td>{{ item.vinyl_release.release_title }}</td>
                    <td>{{ item.vinyl_release.label }}</td>
                    <td class="text-center">
                      {{ item.vinyl_release.release_date|date:"d F" }}
                    </td>
                    <td class="text-center">
                      {{ item.vinyl_release.supplier.distributor_code }}
                    </td>
                    <td class="text-center">
                      {{ item.quantity }}
                    </td>
                  </tr>
                {% endfor %}
              </tbody> 
            </table>
          </span>
        {% endif %}
      <!--#endregion -->

      <!--#region to order -->
        {% if not_ordered_plates|length >= 1 %}
          <span style="margin-top:10mm; display:flex; justify-content:center;">
            <table class="table caption-top" style="font-size:0.7rem">
              <caption style="font-size:0.8rem">
                I have your request logged.<br>
                However, these items may not have become available yet so I can not order these yet.
              </caption>
              <thead>
                <tr>
                  <th></th>
                  <th></th>
                  <th>Catalog</th>
                  <th>Artist</th>
                  <th>Title</th>
                  <th>Label</th>
                  <th class="text-center">Q</th>
                </tr>
              </thead>
              <tbody>
                {% for item in not_ordered_plates %}
                  <tr>
                    <!--#region artwork -->
                      <td style="height:25px; width: 25px; text-align:center;">
                        {% if item.vinyl_release.artwork_small %}
                            <img src="{{ item.vinyl_release.artwork_small.url }}" width="25" height="25">
                        {% else %}
                        <div style="text-align:center; font-size: 0.5rem;">No image</div>
                        {% endif %}
                      </td>
                    <!--#endregion -->
                    {% if item.vinyl_release.plate_count == 1 %}
                      <td class="text-center">{{ item.vinyl_release.plate_size }}</td>
                    {% else %}
                      <td class="text-center">{{ item.vinyl_release.plate_count }}x{{ item.vinyl_release.plate_size }}</td>
                    {% endif %}
                    <td>{{ item.vinyl_release.catalog_number }}</td>
                    <td>{{ item.vinyl_release.artist }}</td>
                    <td>{{ item.vinyl_release.release_title }}</td>
                    <td>{{ item.vinyl_release.label }}</td>
                    <td class="text-center">
                      {{ item.quantity }}
                    </td>
                  </tr>
                {% endfor %}
              </tbody> 
            </table>
          </span>
        {% endif %}
      <!--#endregion -->
    </div>
  </body>
</html>